define("vox/General/BezierFunction",[],function(){var e=function(e,t){this.values=e,this.coefficients=t};return e.prototype.getAt=function(e){var t,n,r=0,i=this.values.length-1;for(t=0;t<=i;t++)n=this.coefficients.get(i,t),r+=n*Math.pow(1-e,i-t)*Math.pow(e,t)*this.values[t];return r},e}),define("vox/General/BinomialCoefficient",[],function(){var e={},t=function(){return undefined};return t.prototype.get=function(t,n){var r;return e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(n)||(n==0||t==n?r=1:r=this.get(t-1,n-1)+this.get(t-1,n),e[t][n]=r),e[t][n]},t}),define("vox/Renderer/CanvasRenderer",[],function(){var e=Math.sin(Math.PI/6),t=Math.cos(Math.PI/6),n=function(e,t){var n=e.substring(1).match("([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})"),r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);return"rgba("+r+","+i+","+s+","+t+")"},r=function(e,t,r,i,s){this.canvas=e,this.colors={left:r,top:i,right:s},this.transparentColors={left:n(r,.2),top:n(i,.2),right:n(s,.2)},this.updateRenderingData(t)};return r.prototype={updateRenderingData:function(n){this.hypotenuseLength=n,this.shortLength=n*e,this.longLength=n*t,this.offsets=[{x:0,y:0},{x:this.longLength,y:this.shortLength},{x:2*this.longLength,y:0},{x:2*this.longLength,y:-2*this.shortLength},{x:this.longLength,y:-1*this.shortLength},{x:0,y:-2*this.shortLength},{x:this.longLength,y:-3*this.shortLength}],this.hexCanvas=document.createElement("canvas"),this.hexCanvas.setAttribute("width",Math.ceil(2*this.longLength)),this.hexCanvas.setAttribute("height",Math.ceil(2*this.longLength)+3),this.hexCanvasTrans=document.createElement("canvas"),this.hexCanvasTrans.setAttribute("width",Math.ceil(2*this.longLength)),this.hexCanvasTrans.setAttribute("height",Math.ceil(2*this.longLength)+3);var r=this.hexCanvas.getContext("2d");this.drawCube(r,0,this.shortLength+this.longLength+2,!1),r=this.hexCanvasTrans.getContext("2d"),this.drawCube(r,0,this.shortLength+this.longLength+2,!0)},project:function(e,t,n,r){return e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),{x:r.x+this.longLength*(e+t),y:r.y+this.shortLength*(t-e)+this.hypotenuseLength*-1*n}},drawCube:function(e,t,n,r){var i=r?this.transparentColors:this.colors;this.drawDiamond(e,t,n,this.offsets[0],this.offsets[1],this.offsets[4],this.offsets[5],i.left),this.drawDiamond(e,t,n,this.offsets[1],this.offsets[2],this.offsets[3],this.offsets[4],i.right),this.drawDiamond(e,t,n,this.offsets[3],this.offsets[4],this.offsets[5],this.offsets[6],i.top)},drawCubePrerendered:function(e,t,n,r){var i=r?this.hexCanvasTrans:this.hexCanvas;e.drawImage(i,Math.round(t),Math.round(n)-18)},drawDiamond:function(e,t,n,r,i,s,o,u){e.fillStyle=u,e.beginPath(),e.moveTo(t+r.x,n+r.y),e.lineTo(t+i.x,n+i.y),e.lineTo(t+s.x,n+s.y),e.lineTo(t+o.x,n+o.y),e.closePath(),e.fill()},getCanvasSize:function(e,t,n){var r=(e+t)*this.longLength,i=n*this.hypotenuseLength+(e+t)*this.shortLength;return{width:r,height:i,origin:{x:0,y:i-t*this.shortLength}}},clearCanvas:function(){return undefined},render:function(e,t){t==undefined&&(t=-1);var n=e[0][0].length,r=e[0].length,i=e.length,s,o,u=this.getCanvasSize(n,r,i),a,f={},l=i+n+r,c=[],h,p,d,v,m,g,y,b,w,E,S;this.canvas.setAttribute("style","max-width:100%"),this.canvas.setAttribute("width",u.width+"px"),this.canvas.setAttribute("height",u.height+"px"),a=this.canvas.getContext("2d");for(s=0;s<l;s++)c.push([]);h=t>=0?t:i-1,p=n-1;for(m=h;m>=0;m--)for(g=0;g<r;g++)for(y=p;y>=0;y--)try{if(e[m][g][y]){b=p-y,w=Math.min(b,g,m),E=[b-w,g-w,m-w].join(":"),S=b+g+m;if(t>=0&&m<=t||t<=0)f.hasOwnProperty(E)||(f[E]=S,c[S].push({x:y,y:g,z:m}))}}catch(x){console.error(x.message)}for(s=0;s<l;s++)for(o in c[s])c[s].hasOwnProperty(o)&&(d=c[s][o],v=this.project(d.x,d.y,d.z,u.origin),this.drawCubePrerendered(a,v.x,v.y,!1));if(t>=0&&t<i){m=t+1;for(g=0;g<r;g++)for(y=n-1;y>=0;y--)try{e[m][g][y]&&(v=this.project(y,g,m,u.origin),this.drawCubePrerendered(a,v.x,v.y,!0))}catch(x){console.error(x.message)}}}},r.getHypotenuseSizeFromWidth=function(e,n,r,i){return i/(e+n)/t},r.getHypotenuseSizeFromHeight=function(t,n,r,i){return i/(r+(t+n)*e)},r}),define("vox/Renderer/ConsoleRenderer",[],function(){var e=function(){return undefined};return e.prototype.render=function(e){var t,n,r,i="";for(t=0;t<e.length;t++){i="";for(n=0;n<e[t].length;n++){for(r=0;r<e[t][n].length;r++)i+=e[t][n][r]?"X":"-";i+="\n"}console.log(i+"\n")}},e}),define("vox/Renderer/SvgLayerRenderer",[],function(){function e(e,t){var n=Math.pow(10,t),r=Math.round(e*n)/n;return r}function t(e){var t,n=null;if(!e||typeof e!="string")return null;try{window.DOMParser?(t=new window.DOMParser,n=t.parseFromString(e,"text/xml")):(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e))}catch(r){}if(n&&n.documentElement&&!n.getElementsByTagName("parsererror").length)return n;throw new Error("Invalid XML: "+e)}var n=function(e){this.bumpHeight=e||.25};return n.prototype={generateLayerSvg:function(n,r){var i,s,o,u,a,f,l,c,h;if(!n.hasOwnProperty(r))throw new Error("Invalid layer: `"+r+"`");i=n[r],a=e(1/i.length*100,2),f=e(1/i[0].length*100,2),c=e(a*this.bumpHeight,2),s='<svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 '+(100+c)+'">\n';for(u=0;u<i.length;u++)for(o=0;o<i[u].length;o++)l=null,h=0,i[u][o]?l="shape":r>0&&n[r-1][u][o]?(h=c,l="shapeBelow"):o+u&1&&(h=c,l="fill"),l!==null&&(s+='<rect class="'+l+'" '+'y="'+e(u*a+h,2)+'" '+'height="'+a+'" '+'width="'+f+'" '+'x="'+e(o*f,2)+'" />\n'),i[u][o]&&(u==i.length-1||!i[u+1][o])&&(s+='<rect class="bump" y="'+e((u+1)*a,2)+'" '+'height="'+c+'" '+'width="'+f+'" '+'x="'+e(o*f,2)+'" />\n');return s+="</svg>",t(s)}},n}),define("vox/Shape/BaseShape",[],function(){var e=function(e,t,n,r){this.width=parseInt(e,10),this.depth=parseInt(t,10),this.height=parseInt(n,10),this.thickness=r};return e.prototype={checkDistance:function(e,t){return this.thickness?t-this.thickness<=e&&e<=t:e<t},generate3d:function(){throw new Error("Unimplemented method `generate3d`")},generateRotation:function(e){var t=[],n,r=(this.width-1)/2,i=(this.depth-1)/2,s=Math.min(r,i),o=r/s,u=i/s,a,f,l,c,h;for(c=-i;c<=i;c++){n=[];for(h=-r;h<=r;h++)a=h/o,f=c/u,l=Math.sqrt(Math.pow(a,2)+Math.pow(f,2)),n.push(this.checkDistance(l,e));t.push(n)}return t}},e}),define("vox/Shape/Bezier",["vox/Shape/BaseShape","vox/General/BezierFunction","vox/General/BinomialCoefficient"],function(e,t,n){var r=function(r,i,s,o,u,a,f){e.call(this,r,i,s,o);var l=Math.min(this.width,this.depth,this.height),c=new n;this.pointsX=u,this.pointsY=a,this.axis=f,this.bezierFunctionX=new t(u,c),this.bezierFunctionY=new t(a,c),this.minRadius=l/2,this.adjustedMinRadius=(l-1)/2};return r.prototype=Object.create(e.prototype),r.prototype.getPoint=function(e){return{x:this.bezierFunctionX.getAt(e),y:this.bezierFunctionY.getAt(e)}},r.prototype.generate3d=function(){var e=1,t={},n=[],r,i,s,o,u;this.axis=="x"?e=this.width:this.axis=="y"?e=this.depth:this.axis=="z"&&(e=this.height),t={};for(i=0;i<10*e;i++)s=i/(10*e),o=this.getPoint(s),u=Math.floor(o.x*e),t.hasOwnProperty(u)?t[u]=Math.max(o.y,t[u]):t[u]=o.y;t[0]=this.pointsY[0];for(i=0;i<this.height;i++)r=t[i]*this.minRadius,n.push(this.generateRotation(r));return n},r}),define("vox/Shape/Cone",["vox/Shape/BaseShape"],function(e){var t=function(t,n,r,i){e.call(this,t,n,r,i);var s=Math.min(this.width,this.depth);this.minRadius=s/2,this.adjustedMinRadius=(s-1)/2};return t.prototype=Object.create(e.prototype),t.prototype.generate3d=function(e){var t=[],n=this.height-.5,r,i,s;for(i=.5;i<=n;i++)s=1-i/this.height,r=s*this.minRadius,t.push(this.generateRotation(r));return t},t}),define("vox/Shape/Dome",["vox/Shape/BaseShape"],function(e){var t=function(t,n,r,i){e.call(this,t,n,r,i);var s=Math.min(this.width,this.depth);this.minRadius=s/2,this.adjustedMinRadius=(s-1)/2};return t.prototype=Object.create(e.prototype),t.prototype.generate3d=function(){var e=[],t=this.height,n=t/this.adjustedMinRadius,r,i,s;for(s=.5;s<t;s++)r=Math.abs(s/n),i=Math.sqrt(Math.pow(this.minRadius,2)-Math.pow(Math.abs(r),2)),e.push(this.generateRotation(i));return e},t}),define("vox/Shape/Sphere",["vox/Shape/BaseShape"],function(e){var t=function(t,n,r,i){e.call(this,t,n,r,i);var s=Math.min(this.width,this.depth);this.minRadius=s/2,this.adjustedMinRadius=(s-1)/2};return t.prototype=Object.create(e.prototype),t.prototype.generate3d=function(){var e=[],t=(this.height-1)/2,n=this.height/2,r=n/this.adjustedMinRadius,i,s,o;for(o=-t;o<=t;o++)i=Math.abs(o/r),s=Math.sqrt(Math.pow(this.adjustedMinRadius,2)-Math.pow(Math.abs(i),2)),e.push(this.generateRotation(s));return e},t}),define("vox/Voxel",["vox/General/BezierFunction","vox/General/BinomialCoefficient","vox/Renderer/CanvasRenderer","vox/Renderer/ConsoleRenderer","vox/Renderer/SvgLayerRenderer","vox/Shape/BaseShape","vox/Shape/Bezier","vox/Shape/Cone","vox/Shape/Dome","vox/Shape/Sphere"],function(e,t,n,r,i,s,o,u,a,f){return{General:{BezierFunction:e,BinomialCoefficient:t},Renderer:{CanvasRenderer:n,ConsoleRenderer:r,SvgLayerRenderer:i},Shape:{BaseShape:s,Bezier:o,Cone:u,Dome:a,Sphere:f}}});